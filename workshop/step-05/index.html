<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Step 5 - Download Reference Layers from Protomaps - Te Ara Hura Workshop</title>
  <link rel="icon" type="image/x-icon" href="../favicon.ico">
  <link href="https://fonts.googleapis.com/css2?family=Overpass:wght@300;400;600&family=Overpass+Mono:wght@400&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../workshop.css">
</head>
<body>
  <div class="workshop-container">
    <aside class="workshop-sidebar">
      <button class="sidebar-toggle" id="sidebarToggle" aria-label="Toggle sidebar">
        <span class="toggle-icon">☰</span>
      </button>
      <div class="sidebar-content" id="sidebarContent">
        <div class="sidebar-logo">
          <img src="../images/foss4g2025-logo.svg" alt="FOSS4G 2025" class="logo">
        </div>
        <div class="sidebar-header">
          <h2><a href="../welcome/" class="sidebar-header-link">Standalone Web Maps, No Platform Required</a></h2>
        </div>
        <nav class="sidebar-nav">
          
            
            
              <a href="../step-01/" class="sidebar-item">
            
              <span class="step-number">Step 1</span>
              <span class="step-title">Get Set Up</span>
            </a>
          
            
            
              <a href="../step-02/" class="sidebar-item">
            
              <span class="step-number">Step 2</span>
              <span class="step-title">Use Overpass to Create an OpenStreetMap Extract</span>
            </a>
          
            
            
              <a href="../step-03/" class="sidebar-item">
            
              <span class="step-number">Step 3</span>
              <span class="step-title">Use Maplibre to Render Your Map</span>
            </a>
          
            
            
              <a href="../step-04/" class="sidebar-item">
            
              <span class="step-number">Step 4</span>
              <span class="step-title">Initialize GitHub Pages to Display Your Map</span>
            </a>
          
            
            
              <a href="./" class="sidebar-item active">
            
              <span class="step-number">Step 5</span>
              <span class="step-title">Download Reference Layers from Protomaps</span>
            </a>
          
            
            
              <a href="../step-06/" class="sidebar-item">
            
              <span class="step-number">Step 6</span>
              <span class="step-title">Configure the Stylesheet</span>
            </a>
          
            
            
              <a href="../step-07/" class="sidebar-item">
            
              <span class="step-number">Step 7</span>
              <span class="step-title">Add Terrain (Hillshade, Contours)</span>
            </a>
          
            
            
              <a href="../step-08/" class="sidebar-item">
            
              <span class="step-number">Step 8</span>
              <span class="step-title">Add Interactivity</span>
            </a>
          
          
            <div class="sidebar-divider"></div>
            <div class="sidebar-label">Bonus Steps</div>
            
          
        </nav>
      </div>
    </aside>

    <main class="workshop-main">
      <article class="workshop-content">
        
          <h1>Step 5 - Download Reference Layers from Protomaps</h1>
        
        
        
        <p>In this step, we'll download a tile extract for Waiheke Island to use as our map's basemap (roads, labels, landcover, etc.).</p>
<h2>Downloading Protomaps</h2>
<p>Protomaps provides global basemap tiles stored in PMTiles format and extractable by bounding box, so you can grab just what you need to provide some reference layers on your trail map.</p>
<h3>Install PMTiles CLI</h3>
<p>First, we need to install the PMTiles command-line tool to download and extract tiles. From the command line:</p>
<h4>macOS Installation</h4>
<pre><code class="language-bash">brew install pmtiles
</code></pre>
<h4>Linux/Windows Installation</h4>
<p>Download from <a rel="noreferrer" target="_blank" href="https://github.com/protomaps/go-pmtiles/releases">https://github.com/protomaps/go-pmtiles/releases</a> or follow the <a rel="noreferrer" target="_blank" href="https://docs.protomaps.com/guide/getting-started">Protomaps Getting Started guide</a>.</p>
<h4>Verify Installation</h4>
<pre><code class="language-bash">pmtiles version
</code></pre>
<h3>Define the Bounding Box</h3>
<p>For Waiheke Island, Auckland, New Zealand, we'll use this bounding box:</p>
<ul>
<li><strong>West (min longitude)</strong>: 174.8</li>
<li><strong>East (max longitude)</strong>: 175.2</li>
<li><strong>South (min latitude)</strong>: -37.0</li>
<li><strong>North (max latitude)</strong>: -36.7</li>
</ul>
<p><strong>Format</strong>: We'll structure the bounding box as a list of <code>west, south, east, north</code> coordinates, and end up with <code>174.8, -37.0, 175.2, -36.7</code></p>
<p>This bounding box includes:</p>
<ul>
<li>The entire Waiheke Island</li>
<li>Some surrounding water for context</li>
<li>A small buffer around the island</li>
</ul>
<p><strong>Tip</strong>: Need to find a bounding box for a different area? Use <a rel="noreferrer" target="_blank" href="https://bboxfinder.com/">bboxfinder.com</a> - draw a rectangle on the map and it will give you the bounding box coordinates in the format you need.</p>
<h3>Find the Latest Protomaps Build</h3>
<ol>
<li><strong>Check Protomaps builds</strong>: Visit <a rel="noreferrer" target="_blank" href="https://maps.protomaps.com/builds/">https://maps.protomaps.com/builds/</a></li>
<li><strong>Find the latest daily build</strong>: Look for the most recent successful build in the "date" column (builds run nightly but it's the "tileset version" that matters for ensuring you've got the latest data)</li>
<li><strong>Note the filename</strong>: It will look like <code>YYYYMMDD.pmtiles</code> (e.g., <code>20251110.pmtiles</code>)</li>
<li><strong>Click <u>xray</u></strong> in the same row</li>
<li>This allows you to inspect the tile layers in the basemap data. Zoom in on <a rel="noreferrer" target="_blank" href="https://pmtiles.io/#url=https%3A%2F%2Fbuild.protomaps.com%2F20251110.pmtiles&map=10/-36.8483/175.0938">Wiaheke Island</a> to see what's there. Toggle on and off <code>pois</code>. What features are these?</li>
</ol>
<h3>Download the Protomaps Extract</h3>
<p>Run this command (replace <code>20251110</code> with a more recent build if you like):</p>
<pre><code class="language-bash">pmtiles extract https://build.protomaps.com/20251110.pmtiles sources/waiheke_island.pmtiles \
  --minzoom=10 \
  --maxzoom=16 \
  --bbox=174.8,-37.0,175.2,-36.7
</code></pre>
<p><strong>Parameters explained:</strong></p>
<ul>
<li><code>--minzoom=10</code>: Minimum zoom level (this is the maximum extent of the map, beyond this, the island is too tiny)</li>
<li><code>--maxzoom=16</code>: Maximum zoom level (this is the maximum detail you can get from the data)</li>
<li><code>--bbox=174.8,-37.0,175.2,-36.7</code>: Bounding box for Waiheke Island</li>
</ul>
<p><strong>Note</strong>: This extract will typically be 50-200 MB, well under the 1 GB limit Github supports.</p>
<h3>Wait for Download</h3>
<p>The download process can take a few minutes depending on:</p>
<ul>
<li>Your internet connection</li>
<li>The size of the extract</li>
<li>Server load</li>
</ul>
<p>You'll see progress output showing the download status, and the number of tiles and total file size of your download.</p>
<h3>Commit Your Changes</h3>
<p>Follow the process from Step 4 and Step 2 to add, commit, and push <code>waiheke_island.pmtiles</code> to your remote fork.</p>
<h3>What You Have Now</h3>
<p>At the end of this step, you should have:</p>
<ul>
<li><code>sources/waiheke_island.pmtiles</code>: Protomaps basemap tiles for Waiheke Island, stored both locally on your hard drive and remotely via Github.</li>
</ul>
<h3>Next Steps</h3>
<p>In the next step, we'll configure the stylesheet to style the Protomaps tiles and integrate them into your map.</p>

        
        
        <hr>
<p><strong><a href="../step-04/">← Previous: Step 4</a> | <a href="../step-06/">Next: Step 6 - Configure the Stylesheet →</a></strong></p>
      </article>
    </main>
  </div>

  <footer class="workshop-footer">
    <p>FOSS4G 2025 Workshop - <a rel="noreferrer" target="_blank" href="https://talks.osgeo.org/foss4g-2025/speaker/7A883D/">Stephanie May</a></p>
    <p class="footer-attribution">
      Background image: <a rel="noreferrer" target="_blank" href="https://www.flickr.com/photos/4nitsirk/5624277298" title="The sun returns to Waiheke Island">The sun returns to Waiheke Island</a> by <a rel="noreferrer" target="_blank" href="https://www.flickr.com/photos/4nitsirk/">Kristina D.C. Hoeppner</a>, <a target="_blank" href="https://creativecommons.org/licenses/by-sa/2.0/deed.en" rel="noreferrer">CC BY-SA 2.0</a>
    </p>
  </footer>

  <script>
    // Toggle sidebar on mobile
    const sidebarToggle = document.getElementById('sidebarToggle');
    const sidebarContent = document.getElementById('sidebarContent');
    
    if (sidebarToggle && sidebarContent) {
      sidebarToggle.addEventListener('click', function() {
        const sidebar = sidebarContent.closest('.workshop-sidebar');
        if (sidebar) {
          sidebar.classList.toggle('open');
        }
        sidebarContent.classList.toggle('open');
        sidebarToggle.classList.toggle('active');
      });
      
      // Close sidebar when clicking outside on mobile
      document.addEventListener('click', function(event) {
        if (window.innerWidth <= 768) {
          if (!sidebarContent.contains(event.target) && !sidebarToggle.contains(event.target)) {
            sidebarContent.classList.remove('open');
            sidebarToggle.classList.remove('active');
          }
        }
      });
    }
  </script>
</body>
</html>

